# Test: JobRun without templateRef should fail
---
apiVersion: chainsaw.kyverno.io/v1alpha1
kind: Test
metadata:
  name: jobrun-missing-templateref
spec:
  steps:
    - name: Create JobRun without templateRef
      apply:
        - apiVersion: hematoscope.app/v1
          kind: JobRun
          metadata:
            name: missing-templateref
            namespace: job-template-run
          spec: {}
      expect:
        error: true
    - name: Assert JobRun not ready
      assert:
        - apiVersion: hematoscope.app/v1
          kind: JobRun
          name: missing-templateref
          namespace: job-template-run
          match:
            status: {}
